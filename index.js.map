{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst searchParams = {\n  key: '49355742-bd7d44539c0e651abd52850bf',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n};\n\nexport async function fetchPhotos(searchQuery, page) {\n  searchParams.q = searchQuery;\n  searchParams.page = page;\n  try {\n    const response = await axios.get(`?${new URLSearchParams(searchParams)}`);\n    return response.data;\n  } catch (error) {\n    return error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\nexport const loader = document.querySelector('.loader');\nexport const lightbox = new SimpleLightbox('.gallery li a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createMarkup(images) {\n  const markup = images\n    .map(image => {\n      const {\n        webformatURL,\n        tags,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n      return `<li class=\"gallery-card\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"card-image\"  />\n          <ul class=\"card-caption\">\n            <li class=\"image-tag\"><p>Likes<br />${likes}</p></li>\n            <li class=\"image-tag\"><p>Views<br />${views}</p></li>\n            <li class=\"image-tag\"><p>Comments<br />${comments}</p></li>\n            <li class=\"image-tag\"><p>Downloads<br />${downloads}</p></li>\n          </ul>\n        </a>\n      </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { createMarkup, gallery, loader, lightbox } from './js/render-functions';\nconst form = document.querySelector('.form');\nconst btn_load = document.querySelector('.btn-load-js');\n\nbtn_load.style = 'display: none';\nloader.classList.toggle('loader');\n\nlet searchQuery = '';\nlet page = 1;\n\nform.addEventListener('submit', renderPhotos);\nbtn_load.addEventListener('click', getMorePhotos);\n\nasync function renderPhotos(event) {\n  event.preventDefault();\n  searchQuery = event.currentTarget.elements.search_text.value.trim();\n  page = 1;\n  if (!searchQuery) {\n    iziToast.error({\n      message: 'Search field must not be empty!',\n      position: 'topRight',\n    });\n    return;\n  }\n  gallery.innerHTML = '';\n  loader.classList.toggle('loader');\n  try {\n    const data = await fetchPhotos(searchQuery, page);\n    if (data.totalHits === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      btn_load.style = 'display: none';\n      return;\n    }\n    createMarkup(data.hits);\n    if (data.totalHits < 15) {\n      btn_load.style = 'display: none';\n      return;\n    }\n    btn_load.style = 'display: block';\n  } catch (error) {\n    loader.innerHTML = 'Oops... something went wrong';\n  } finally {\n    loader.classList.toggle('loader');\n    lightbox.refresh();\n  }\n}\n\nasync function getMorePhotos() {\n  page += 1;\n  loader.classList.toggle('loader');\n  const card = document.querySelector('.gallery>li');\n  const cardHeight = card.getBoundingClientRect().height;\n  try {\n    const data = await fetchPhotos(searchQuery, page);\n    if (data.totalHits > 15 * page) {\n      createMarkup(data.hits);\n      scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    } else {\n      btn_load.style = 'display: none';\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    loader.innerHTML = 'Oops... something went wrong';\n  } finally {\n    loader.classList.toggle('loader');\n    lightbox.refresh();\n  }\n}\n"],"names":["axios","searchParams","fetchPhotos","searchQuery","page","error","gallery","loader","lightbox","SimpleLightbox","createMarkup","images","markup","image","webformatURL","tags","largeImageURL","likes","views","comments","downloads","form","btn_load","renderPhotos","getMorePhotos","event","iziToast","data","cardHeight"],"mappings":"+vBAEAA,EAAM,SAAS,QAAU,2BAEzB,MAAMC,EAAe,CACnB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACZ,EAEO,eAAeC,EAAYC,EAAaC,EAAM,CACnDH,EAAa,EAAIE,EACjBF,EAAa,KAAOG,EACpB,GAAI,CAEF,OADiB,MAAMJ,EAAM,IAAI,IAAI,IAAI,gBAAgBC,CAAY,CAAC,EAAE,GACxD,IACjB,OAAQI,EAAO,CACd,OAAOA,CACR,CACH,CClBO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,IAAIC,EAAe,gBAAiB,CAC1D,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IAAIE,GAAS,CACZ,KAAM,CACJ,aAAAC,EACA,KAAAC,EACA,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,mBACMG,CAAa;AAAA,sBACVF,CAAY,UAAUC,CAAI;AAAA;AAAA,kDAEEE,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA;AAAA,YAI/D,CAAK,EACA,KAAK,EAAE,EACVd,EAAQ,mBAAmB,YAAaM,CAAM,CAChD,CChCA,MAAMS,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAW,SAAS,cAAc,cAAc,EAEtDA,EAAS,MAAQ,gBACjBf,EAAO,UAAU,OAAO,QAAQ,EAEhC,IAAIJ,EAAc,GACdC,EAAO,EAEXiB,EAAK,iBAAiB,SAAUE,CAAY,EAC5CD,EAAS,iBAAiB,QAASE,CAAa,EAEhD,eAAeD,EAAaE,EAAO,CAIjC,GAHAA,EAAM,eAAc,EACpBtB,EAAcsB,EAAM,cAAc,SAAS,YAAY,MAAM,OAC7DrB,EAAO,EACH,CAACD,EAAa,CAChBuB,EAAS,MAAM,CACb,QAAS,kCACT,SAAU,UAChB,CAAK,EACD,MACD,CACDpB,EAAQ,UAAY,GACpBC,EAAO,UAAU,OAAO,QAAQ,EAChC,GAAI,CACF,MAAMoB,EAAO,MAAMzB,EAAYC,EAAaC,CAAI,EAChD,GAAIuB,EAAK,YAAc,EAAG,CACxBD,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACDJ,EAAS,MAAQ,gBACjB,MACD,CAED,GADAZ,EAAaiB,EAAK,IAAI,EAClBA,EAAK,UAAY,GAAI,CACvBL,EAAS,MAAQ,gBACjB,MACD,CACDA,EAAS,MAAQ,gBAClB,MAAe,CACdf,EAAO,UAAY,8BACvB,QAAY,CACRA,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAS,QAAO,CACjB,CACH,CAEA,eAAegB,GAAgB,CAC7BpB,GAAQ,EACRG,EAAO,UAAU,OAAO,QAAQ,EAEhC,MAAMqB,EADO,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OAChD,GAAI,CACF,MAAMD,EAAO,MAAMzB,EAAYC,EAAaC,CAAI,EAC5CuB,EAAK,UAAY,GAAKvB,GACxBM,EAAaiB,EAAK,IAAI,EACtB,SAAS,CACP,IAAKC,EAAa,EAClB,SAAU,QAClB,CAAO,IAEDN,EAAS,MAAQ,gBACjBI,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EAEJ,MAAe,CACdnB,EAAO,UAAY,8BACvB,QAAY,CACRA,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAS,QAAO,CACjB,CACH"}